{"remainingRequest":"/Users/lyx/WebstormProjects/avg-geyser/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyx/WebstormProjects/avg-geyser/src/views/dashboard/actions/Deposit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyx/WebstormProjects/avg-geyser/src/views/dashboard/actions/Deposit.vue","mtime":1599728692000},{"path":"/Users/lyx/WebstormProjects/avg-geyser/node_modules/cache-loader/dist/cjs.js","mtime":1599786627641},{"path":"/Users/lyx/WebstormProjects/avg-geyser/node_modules/babel-loader/lib/index.js","mtime":1599578972213},{"path":"/Users/lyx/WebstormProjects/avg-geyser/node_modules/cache-loader/dist/cjs.js","mtime":1599786627641},{"path":"/Users/lyx/WebstormProjects/avg-geyser/node_modules/vue-loader/lib/index.js","mtime":1599786628079}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport chainOpt from \"../../../utils/web3/chainOperation\";\nimport $ from \"jquery\";\nimport Decimal from \"decimal.js\";\n\n// Import component\nimport Loading from 'vue-loading-overlay';\n// Import stylesheet\nimport 'vue-loading-overlay/dist/vue-loading.css';\n\nlet opt = chainOpt.opt\nexport default {\n  name: \"deposit\",\n  components:{\n    Loading\n  },\n  props: [\"hideStaking\", \"roundInfo\"],\n  data() {\n    return {\n      avgUniAmount: \"0\",\n      avgCakeAmount: \"0\",\n      enabled: false,\n      willLock: \"0\",\n      loading: false,\n    }\n  },\n\n  watch: {\n    enabled() {\n      if(this.enabled) {\n        $(this.$el).find(\".staking-input, .staking-input-tit, .notes-txt\").show()\n        $(this.$el).find(\".staking-input\").removeAttr(\"disabled\")\n      } else {\n        $(this.$el).find(\".staking-input, .staking-input-tit, .notes-txt\").hide()\n        $(this.$el).find(\".staking-input\").attr(\"disabled\", \"disabled\")\n      }\n    },\n  },\n\n  mounted() {\n    setTimeout(async _=>{\n      this.enabled = await opt.isDepositEnabled().catch(e=>{return false})\n      if(!this.enabled) {\n        this.$nextTick(_=>{\n          $(this.$el).find(\".staking-input, .staking-input-tit, .notes-txt\").hide()\n          $(this.$el).find(\".staking-input\").attr(\"disabled\", \"disabled\")\n        })\n      }\n    }, 500)\n  },\n\n  methods: {\n    async loopCheckEnabled() {\n      this.enabled = await opt.isDepositEnabled().catch(e=>{return false})\n\n      if(this.enabled) {\n        return\n      }\n\n      setTimeout(this.loopCheckEnabled, 15000)\n    },\n\n    async enable() {\n      this.loading = true\n\n      let enabled = await opt.isDepositEnabled()\n      if(enabled) {\n        this.enabled = true\n        this.loading = false\n        return\n      }\n\n      enabled = await opt.enableDeposit()\n\n      this.loading = false\n      if(enabled === null) {\n        return\n      }\n      await this.loopCheckEnabled()\n    },\n\n    async staking() {\n      try {\n        let _ = new Decimal(this.avgUniAmount)\n      } catch (e) {\n        setTimeout(_=>{\n          this.$notification.open({\n            message: 'Invalid Input!',\n            description: \"Amount must be a number\",\n            duration: 0,\n          });\n          this.loading = false\n        }, 400)\n\n        return\n      }\n\n      if(parseFloat(this.avgUniAmount) < 2) {\n        setTimeout(_=>{\n          this.$notification.open({\n            message: 'Minimum deposit of UNI-V2-LP is 2!',\n            description: \"\",\n            duration: 0,\n          });\n          this.loading = false\n        }, 400)\n        return\n      }\n\n      let enabled = await opt.isDepositEnabled()\n      if(!enabled) {\n        this.enabled = false\n        return\n      }\n\n      this.loading = true\n      let tx = await opt.deposit(this.avgUniAmount)\n\n      if(tx !== null){\n        console.log(\"transaction send success, tx hash is: \", tx)\n      } else {\n\n      }\n\n      this.loading = false\n      if(typeof this.hideStaking === \"function\") {\n        this.hideStaking()\n      }\n    },\n  },\n}\n",{"version":3,"sources":["Deposit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Deposit.vue","sourceRoot":"src/views/dashboard/actions","sourcesContent":["<template>\n  <div class=\"row text-center staking-div\">\n    <div class=\"col\">\n      <div class=\"row\">\n        <div class=\"col\">\n          <img class=\"staking-logo\" :src=\"'/static/like-to-do/deposit.png'\" :alt=\"$t('token.name')\"/>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <p class=\"staking-tit\">{{ $t(\"action.deposit\") }}</p>\n          <p class=\"staking-txt\">{{ $t(\"dashboard.deposit.txt\") }}</p>\n          <p class=\"staking-apy\"><b>{{ $t(\"dashboard.deposit.apy\") }}</b></p>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <p class=\"staking-input-tit\">\n            {{ $t(\"dashboard.deposit.confirm1\") }}\n            <b>{{ $t(\"token.uniName\") }}</b>\n            {{ $t(\"dashboard.deposit.confirm2\") }}\n          </p>\n          <input type=\"text\" v-model=\"avgUniAmount\" placeholder=\"0\" class=\"staking-input\">\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <p class=\"staking-input-tit\">\n            {{ $t(\"dashboard.deposit.mustBe\") }}\n            <b> {{avgUniAmount * 49}} {{ $t(\"token.synthAsset\") }} </b>\n          </p>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col text-left notes-txt\">\n          {{ $t(\"dashboard.deposit.tag\") }}\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <input v-show=\"enabled\" type=\"submit\" class=\"btn btn-info btn-staking-now\" :value=\"$t('action.deposit')\"\n                 @click=\"staking\"\n          >\n          <input v-show=\"!enabled\" type=\"submit\" class=\"btn btn-info btn-staking-now\" :value=\"$t('action.enable')\"\n                 @click=\"enable\"\n          >\n        </div>\n      </div>\n    </div>\n\n    <loading :active.sync=\"loading\"\n             :can-cancel=\"false\"\n             :is-full-page=\"true\"></loading>\n  </div>\n</template>\n\n<script>\nimport chainOpt from \"../../../utils/web3/chainOperation\";\nimport $ from \"jquery\";\nimport Decimal from \"decimal.js\";\n\n// Import component\nimport Loading from 'vue-loading-overlay';\n// Import stylesheet\nimport 'vue-loading-overlay/dist/vue-loading.css';\n\nlet opt = chainOpt.opt\nexport default {\n  name: \"deposit\",\n  components:{\n    Loading\n  },\n  props: [\"hideStaking\", \"roundInfo\"],\n  data() {\n    return {\n      avgUniAmount: \"0\",\n      avgCakeAmount: \"0\",\n      enabled: false,\n      willLock: \"0\",\n      loading: false,\n    }\n  },\n\n  watch: {\n    enabled() {\n      if(this.enabled) {\n        $(this.$el).find(\".staking-input, .staking-input-tit, .notes-txt\").show()\n        $(this.$el).find(\".staking-input\").removeAttr(\"disabled\")\n      } else {\n        $(this.$el).find(\".staking-input, .staking-input-tit, .notes-txt\").hide()\n        $(this.$el).find(\".staking-input\").attr(\"disabled\", \"disabled\")\n      }\n    },\n  },\n\n  mounted() {\n    setTimeout(async _=>{\n      this.enabled = await opt.isDepositEnabled().catch(e=>{return false})\n      if(!this.enabled) {\n        this.$nextTick(_=>{\n          $(this.$el).find(\".staking-input, .staking-input-tit, .notes-txt\").hide()\n          $(this.$el).find(\".staking-input\").attr(\"disabled\", \"disabled\")\n        })\n      }\n    }, 500)\n  },\n\n  methods: {\n    async loopCheckEnabled() {\n      this.enabled = await opt.isDepositEnabled().catch(e=>{return false})\n\n      if(this.enabled) {\n        return\n      }\n\n      setTimeout(this.loopCheckEnabled, 15000)\n    },\n\n    async enable() {\n      this.loading = true\n\n      let enabled = await opt.isDepositEnabled()\n      if(enabled) {\n        this.enabled = true\n        this.loading = false\n        return\n      }\n\n      enabled = await opt.enableDeposit()\n\n      this.loading = false\n      if(enabled === null) {\n        return\n      }\n      await this.loopCheckEnabled()\n    },\n\n    async staking() {\n      try {\n        let _ = new Decimal(this.avgUniAmount)\n      } catch (e) {\n        setTimeout(_=>{\n          this.$notification.open({\n            message: 'Invalid Input!',\n            description: \"Amount must be a number\",\n            duration: 0,\n          });\n          this.loading = false\n        }, 400)\n\n        return\n      }\n\n      if(parseFloat(this.avgUniAmount) < 2) {\n        setTimeout(_=>{\n          this.$notification.open({\n            message: 'Minimum deposit of UNI-V2-LP is 2!',\n            description: \"\",\n            duration: 0,\n          });\n          this.loading = false\n        }, 400)\n        return\n      }\n\n      let enabled = await opt.isDepositEnabled()\n      if(!enabled) {\n        this.enabled = false\n        return\n      }\n\n      this.loading = true\n      let tx = await opt.deposit(this.avgUniAmount)\n\n      if(tx !== null){\n        console.log(\"transaction send success, tx hash is: \", tx)\n      } else {\n\n      }\n\n      this.loading = false\n      if(typeof this.hideStaking === \"function\") {\n        this.hideStaking()\n      }\n    },\n  },\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n@import \"../../../styles/colors.scss\";\n@import \"../../../styles/fonts.scss\";\n\n.staking-div {\n  flex: 1 1 0;\n  padding: 24px 0;\n\n  .staking-logo {\n    width: 180px;\n    height: 180px;\n  }\n\n  .staking-tit {\n    font-family: $fontTit;\n    font-size: 32px;\n    letter-spacing: 2px;\n    margin: 12px 0 24px;\n  }\n  .staking-txt,\n  .staking-apy,\n  .staking-input-tit {\n    color: $txtColor;\n    font-family: $fontTit;\n    font-size: 16px;\n    font-weight: 400;\n  }\n  .staking-txt,\n  .staking-apy {\n    font-family: $fontTxt;\n  }\n  .staking-apy {\n    color: $fontColor;\n    font-size: 20px;\n  }\n  .staking-input-tit {\n    color: $fontColor;\n    font-family: $fontTit;\n    margin-top: 12px;\n  }\n  .staking-input {\n    color: $fontColor;\n    background-color: $bg;\n    font-family: $fontTxt;\n    width: 100%;\n    height: 54px;\n    font-size: 24px;\n    padding: 16px;\n    border-width: 1px;\n    border-style: solid;\n    border-color: $divBorderColor;\n    border-image: initial;\n    border-radius: 20px;\n    outline: none;\n    margin-bottom: 12px;\n  }\n\n  .notes-txt {\n    color: $notesColor;\n    font-family: $fontTxt;\n    font-size: 10px;\n    line-height: 18px;\n    letter-spacing: 0.5px;\n    font-weight: 400;\n  }\n\n  .btn-staking-now {\n    color: $btnFontColor;\n    background-color: $btnBg;\n    font-family: $fontTit;\n    width: 100%;\n    height: 72px;\n    text-transform: uppercase;\n    cursor: pointer;\n    border-width: 1px;\n    border-style: solid;\n    border-color: $divBorderColor;\n    border-image: initial;\n    border-radius: 5px;\n    transition: all 0.1s ease-in 0s;\n  }\n}\n</style>\n"]}]}