{"remainingRequest":"/Users/lyx/WebstormProjects/tefi-geyser/node_modules/babel-loader/lib/index.js!/Users/lyx/WebstormProjects/tefi-geyser/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lyx/WebstormProjects/tefi-geyser/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyx/WebstormProjects/tefi-geyser/src/views/main/Wallet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyx/WebstormProjects/tefi-geyser/src/views/main/Wallet.vue","mtime":1600778140000},{"path":"/Users/lyx/WebstormProjects/tefi-geyser/node_modules/cache-loader/dist/cjs.js","mtime":1599786627641},{"path":"/Users/lyx/WebstormProjects/tefi-geyser/node_modules/babel-loader/lib/index.js","mtime":1599578972213},{"path":"/Users/lyx/WebstormProjects/tefi-geyser/node_modules/cache-loader/dist/cjs.js","mtime":1599786627641},{"path":"/Users/lyx/WebstormProjects/tefi-geyser/node_modules/vue-loader/lib/index.js","mtime":1599786628079}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.sub\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/lyx/WebstormProjects/tefi-geyser/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport chainOpt from \"../../utils/web3/chainOperation\";\nimport Loading from 'vue-loading-overlay';\nimport 'vue-loading-overlay/dist/vue-loading.css';\nimport Decimals from \"decimal.js\";\nimport { startBlock, rewardPerBlock, halfStartBlock, halfRewardPerBlock, maxReward } from \"@/utils/web3/constant\";\nimport { uniAddrs } from \"@/utils/web3/constant\";\nimport Countdown from \"@/components/Countdown\";\nimport { getTLV, getUserTLV } from \"@/utils/web3/totalLockedValue\";\nwindow.mingingPoolInfo = {};\nvar opt = chainOpt.opt;\nvar queryingTLV = false;\nexport default {\n  name: \"Wallet\",\n  components: {\n    Countdown: Countdown,\n    Loading: Loading\n  },\n  data: function data() {\n    return {\n      ConnectWalletModalText: 'Waiting for connection',\n      loading: false,\n      walletConnectView: true,\n      walletConnectError: false,\n      tokenBalance: \"0\",\n      rewardsBalance: \"0.0795\",\n      totalReward: false,\n      userBalance: false,\n      TLV: \"0\",\n      UserTLV: \"0\"\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    setTimeout(function (_) {\n      if (chainOpt.wallet.isConnected()) {\n        _this.setWalletConnected();\n      }\n    }, 2000);\n\n    if (!queryingTLV) {\n      queryingTLV = true;\n      setInterval(function (_) {\n        _this.TLV = getTLV();\n        _this.UserTLV = getUserTLV();\n      }, 1000);\n    }\n  },\n  methods: {\n    updatePoolInfo: function () {\n      var _updatePoolInfo = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var totalCollected, i, pool;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                totalCollected = new Decimals(0);\n                i = 0;\n\n              case 2:\n                if (!(i < uniAddrs.length)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.prev = 3;\n                _context.next = 6;\n                return opt.poolInfo(i);\n\n              case 6:\n                pool = _context.sent;\n                totalCollected = totalCollected.add(pool.userToCollect);\n                this.$nextTick(function (_) {\n                  _this2.tokenBalance = totalCollected.toDP(6, Decimals.ROUND_FLOOR).toString();\n                });\n                _context.next = 13;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](3);\n\n              case 13:\n                i++;\n                _context.next = 2;\n                break;\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[3, 11]]);\n      }));\n\n      function updatePoolInfo() {\n        return _updatePoolInfo.apply(this, arguments);\n      }\n\n      return updatePoolInfo;\n    }(),\n    setWalletConnected: function setWalletConnected() {\n      var _this3 = this;\n\n      this.updatePoolInfo();\n      opt.getBlockNum().then(function (r) {\n        if (r > 0 && r > startBlock) {\n          var totalBlocks = new Decimals(r).sub(startBlock);\n          var halfBlocks = 0;\n\n          if (r > halfStartBlock) {\n            totalBlocks = new Decimals(halfStartBlock).sub(startBlock);\n            halfBlocks = new Decimals(r).sub(halfStartBlock);\n            _this3.rewardsBalance = new Decimals(halfRewardPerBlock).toDP(4, Decimals.ROUND_FLOOR).toString();\n          }\n\n          var totalReward = new Decimals(rewardPerBlock).mul(totalBlocks);\n          var halfReward = new Decimals(halfRewardPerBlock).mul(halfBlocks);\n          var total = totalReward.add(halfReward);\n\n          if (total.gt(maxReward)) {\n            total = new Decimals(maxReward);\n          }\n\n          _this3.totalReward = total.toDP(4, Decimals.ROUND_FLOOR).toString();\n        } else {\n          _this3.totalReward = \"0\";\n        }\n      });\n      opt.userTokenBalance().then(function (r) {\n        _this3.userBalance = r;\n      });\n      this.loading = false;\n      this.walletConnectView = false;\n    },\n    openMetamask: function () {\n      var _openMetamask = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this4 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                //wallet connect\n                this.loading = true;\n\n                if (!chainOpt.wallet.isConnected()) {\n                  chainOpt.wallet.connect().then(function (r) {\n                    if (r === null) {\n                      //not connect, do nothing\n                      _this4.loading = false;\n                      return;\n                    }\n\n                    _this4.setWalletConnected();\n                  }).catch(function () {\n                    //unknown error, do nothing\n                    _this4.loading = false;\n                    _this4.walletConnectError = true;\n                  });\n                } else {\n                  //already connected\n                  this.setWalletConnected();\n                }\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function openMetamask() {\n        return _openMetamask.apply(this, arguments);\n      }\n\n      return openMetamask;\n    }(),\n    seeTheMenu: function seeTheMenu() {\n      this.$router.push({\n        name: \"Dashboard\"\n      });\n    },\n    seeTheList: function seeTheList() {\n      this.$router.push({\n        name: \"List\"\n      });\n    }\n  }\n};",{"version":3,"sources":["Wallet.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"wallet-container\">\n    <div class=\"row\">\n      <div class=\"col text-center\">\n        <img class=\"home-logo\" :src=\"'/static/logo/logo.png'\" alt=\"\"/>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col text-center welcome-tit\">{{ $t(\"common.welcome\") }}</div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col text-center welcome-txt\">{{ $t(\"common.welcomeTxt\") }}</div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col text-center welcome-txt\">{{ $t(\"security.txt\") }}</div>\n    </div>\n\n    <div class=\"row index-countdown\">\n      <div class=\"col text-center\">\n        <countdown :big-text=\"true\" :date-time=\"'2020-09-23 20:00:00'\" :tit-prefix=\"'开启'\"/>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12\">\n        <div class=\"balance-col-div\">\n          <div class=\"row\">\n            <div class=\"col-3 d-flex justify-content-around\">\n              <img class=\"geyser-logo\" :src=\"'/static/logo/logo.png'\" alt=\"\"/>\n            </div>\n            <div class=\"col-9\">\n              <p class=\"preview-tit\">{{ $t(\"home.balance\") }}</p>\n              <p v-if=\"userBalance === false\" class=\"preview-txt\">{{ $t(\"home.status\") }}</p>\n              <p v-if=\"userBalance !== false\" class=\"preview-txt\">{{ this.$HelperTools.toFinancialVal(userBalance) }}</p>\n            </div>\n          </div>\n          <div class=\"row stats-div\">\n            <div class=\"col stats-txt\">{{ $t(\"home.pending\") }}</div>\n            <div class=\"col text-right stats-txt\">{{ this.$HelperTools.toFinancialVal(tokenBalance) }} {{ $t(\"token.name\") }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12\">\n        <div class=\"supply-col-div\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <p class=\"preview-tit\">{{ $t(\"home.total\") }}</p>\n              <p v-if=\"!totalReward\" class=\"preview-txt\">{{ $t(\"home.status\") }}</p>\n              <p v-if=\"totalReward\" class=\"preview-txt\">{{ this.$HelperTools.toFinancialVal(totalReward) }}</p>\n            </div>\n          </div>\n          <div class=\"row stats-div\">\n            <div class=\"col-7 stats-txt\">{{ $t(\"home.rewards\") }}</div>\n            <div class=\"col-5 text-right stats-txt\">{{ rewardsBalance }} {{ $t(\"token.name\") }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12\">\n        <div class=\"supply-col-div\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <p class=\"preview-tit\">{{ $t(\"home.tlv\") }}</p>\n              <p v-if=\"!totalReward\" class=\"preview-txt\">{{ $t(\"home.status\") }}</p>\n              <p v-if=\"totalReward\" class=\"preview-txt\">{{ this.$HelperTools.toFinancialVal(UserTLV) }}</p>\n            </div>\n          </div>\n          <div class=\"row stats-div\">\n            <div class=\"col-7 stats-txt\">{{ $t(\"home.twl\") }}</div>\n            <div class=\"col-5 text-right stats-txt\">{{ this.$HelperTools.toFinancialVal(TLV) }}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"wallet-connect-div\">\n          <div class=\"row\">\n            <div v-show=\"walletConnectView\" class=\"col text-center wallet-connect-tit\">\n              {{ $t(\"wallet.connect\") }}\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col d-flex justify-content-around\">\n              <button v-show=\"walletConnectView\" type=\"submit\" class=\"wallet-btn\" @click=\"openMetamask\">\n                <img class=\"wallet-btn-icon text-right\" :src=\"'/static/logo/logo.png'\" :alt=\"$t('wallet.metamask')\"/>\n                <h2 class=\"wallet-btn-name text-left\">{{ $t(\"wallet.name\") }}</h2>\n              </button>\n              <button v-show=\"!walletConnectView\" type=\"submit\" class=\"wallet-btn\" @click=\"seeTheMenu\">\n                <img class=\"wallet-btn-icon text-right\" :src=\"'/static/logo/logo.png'\" alt=\"\"/>\n                <h2 class=\"wallet-btn-name text-left\">{{ $t(\"wallet.seeTheMenu\") }}</h2>\n              </button>\n            </div>\n          </div>\n\n          <div v-show=\"!walletConnectView\" class=\"row\">\n            <div class=\"col d-flex justify-content-around\">\n              <button type=\"submit\" class=\"wallet-btn\" @click=\"seeTheList\">\n                <img class=\"wallet-btn-icon text-right\" :src=\"'/static/logo/logo.png'\" alt=\"\"/>\n                <h2 class=\"wallet-btn-name text-left\">{{ $t(\"list.seeTheList\") }}</h2>\n              </button>\n            </div>\n          </div>\n\n          <div class=\"row\" v-show=\"walletConnectError\">\n            <div class=\"col text-center wallet-error-txt\">\n              {{ $t(\"wallet.error\") }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <loading :active.sync=\"loading\"\n             :can-cancel=\"false\"\n             :is-full-page=\"true\"></loading>\n  </div>\n</template>\n\n<script>\nimport chainOpt from \"../../utils/web3/chainOperation\";\nimport Loading from 'vue-loading-overlay';\nimport 'vue-loading-overlay/dist/vue-loading.css';\nimport Decimals from \"decimal.js\"\nimport {startBlock, rewardPerBlock, halfStartBlock, halfRewardPerBlock, maxReward} from \"@/utils/web3/constant\";\nimport {uniAddrs} from \"@/utils/web3/constant\";\nimport Countdown from \"@/components/Countdown\";\nimport {getTLV, getUserTLV} from \"@/utils/web3/totalLockedValue\";\n\nwindow.mingingPoolInfo = {}\nlet opt = chainOpt.opt\nlet queryingTLV = false\n\nexport default {\n  name: \"Wallet\",\n  components: {Countdown, Loading },\n\n  data() {\n    return {\n      ConnectWalletModalText: 'Waiting for connection',\n      loading: false,\n      walletConnectView: true,\n      walletConnectError: false,\n\n      tokenBalance: \"0\",\n      rewardsBalance: \"0.0795\",\n\n      totalReward: false,\n      userBalance: false,\n\n      TLV: \"0\",\n      UserTLV: \"0\"\n    };\n  },\n\n  mounted() {\n    setTimeout(_=>{\n      if(chainOpt.wallet.isConnected()) {\n        this.setWalletConnected()\n      }\n    }, 2000)\n\n    if(!queryingTLV) {\n      queryingTLV = true\n      setInterval(_=>{\n        this.TLV = getTLV()\n        this.UserTLV = getUserTLV()\n      }, 1000)\n    }\n\n  },\n\n  methods: {\n    async updatePoolInfo() {\n      let totalCollected = new Decimals(0);\n      for(let i=0; i<uniAddrs.length; i++) {\n        try {\n          let pool = await opt.poolInfo(i)\n          totalCollected = totalCollected.add(pool.userToCollect)\n          this.$nextTick(_=>{\n            this.tokenBalance = totalCollected.toDP(6, Decimals.ROUND_FLOOR).toString()\n          })\n        } catch (e) {}\n      }\n    },\n\n    setWalletConnected() {\n      this.updatePoolInfo()\n      opt.getBlockNum()\n          .then(r=>{\n            if(r > 0 && r > startBlock) {\n              let totalBlocks = new Decimals(r).sub(startBlock)\n              let halfBlocks = 0\n              if(r > halfStartBlock) {\n                totalBlocks = new Decimals(halfStartBlock).sub(startBlock)\n                halfBlocks = new Decimals(r).sub(halfStartBlock)\n                this.rewardsBalance = new Decimals(halfRewardPerBlock).toDP(4, Decimals.ROUND_FLOOR).toString()\n              }\n              let totalReward = new Decimals(rewardPerBlock).mul(totalBlocks)\n              let halfReward = new Decimals(halfRewardPerBlock).mul(halfBlocks)\n\n              let total = totalReward.add(halfReward)\n              if(total.gt(maxReward)) {\n                total = new Decimals(maxReward)\n              }\n\n              this.totalReward = total.toDP(4, Decimals.ROUND_FLOOR).toString()\n            } else {\n              this.totalReward = \"0\"\n            }\n          })\n\n      opt.userTokenBalance()\n          .then(r=>{\n            this.userBalance = r\n          })\n      this.loading = false\n      this.walletConnectView = false\n    },\n\n    async openMetamask() {\n      //wallet connect\n      this.loading = true\n\n      if(!chainOpt.wallet.isConnected()) {\n        chainOpt.wallet.connect()\n          .then(r=>{\n            if(r === null) {\n              //not connect, do nothing\n              this.loading = false\n              return\n            }\n\n            this.setWalletConnected()\n          })\n          .catch(()=>{\n            //unknown error, do nothing\n            this.loading = false\n            this.walletConnectError = true\n          })\n      } else {\n        //already connected\n        this.setWalletConnected()\n      }\n    },\n    seeTheMenu() {\n      this.$router.push({name: \"Dashboard\"})\n    },\n    seeTheList() {\n      this.$router.push({name: \"List\"})\n    },\n  },\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n@import \"../../styles/colors.scss\";\n@import \"../../styles/fonts.scss\";\n.wallet-container {\n  max-width: 800px;\n  margin: auto;\n  height: 100%;\n  padding-top: 15px;\n  //padding-bottom: 30px;\n\n  .home-logo{\n    width: 120px;\n    height: 120px;\n    margin-bottom: 15px !important;\n  }\n\n  .welcome-tit {\n    font-size: 27px;\n    color: $fontColor;\n    letter-spacing: 2px;\n    font-family: $fontTit;\n  }\n  .welcome-txt {\n    margin-bottom: 30px !important;\n    color: $txtColor;\n    font-family: $fontTxt;\n  }\n\n  .balance-col-div,\n  .supply-col-div {\n    border-width: 1px;\n    border-style: solid;\n    border-color: $divBorderColor;\n    border-image: initial;\n    border-radius: 15px;\n    margin-bottom: 15px !important;\n    padding: 15px 0;\n    background-color: $divBg;\n  }\n\n  .geyser-logo {\n    width: 60px;\n    height: 60px;\n    margin: auto;\n  }\n\n  .preview-tit {\n    font-size: 14px;\n    font-family: $fontTxt;\n    color: $txtColor;\n  }\n  .preview-txt {\n    font-size: 27px;\n    font-family: $fontTit;\n    color: $titColor;\n  }\n\n  .stats-div {\n    border-top-width: 1px;\n    border-style: solid none none none;\n    border-color: $divBorderColor;\n    padding-top: 15px;\n  }\n  .stats-txt {\n    font-size: 14px;\n    font-family: $fontTxt;\n    color: $txtColor;\n  }\n\n  .wallet-connect-div {\n    //border-width: 1px;\n    //border-style: solid;\n    //border-color: $divBorderColor;\n    //border-image: initial;\n    //border-radius: 0;\n    padding: 30px 15px;\n    //margin-bottom: 24px !important;\n  }\n\n  .wallet-connect-tit {\n    font-size: 16px;\n    color: $txtColor;\n    line-height: 28px;\n    font-family: $fontTxt;\n    margin-bottom: 20px;\n  }\n  .wallet-error-txt {\n    font-size: 16px;\n    color: $errColor;\n    line-height: 28px;\n    font-family: $fontTxt;\n    margin-top: 15px;\n  }\n\n  .wallet-btn {\n    height: 80px;\n    width: 290px;\n    display: flex;\n    justify-content: center;\n    -webkit-box-align: center;\n    align-items: center;\n    opacity: 1;\n    cursor: pointer;\n    border-radius: 40px;\n    border-width: 2px;\n    border-style: solid;\n    border-color: $divBorderColor;\n    border-image: initial;\n    color: $walletBtnColor;\n    background-color: $btnBg;\n    box-shadow: $btnBoxShadow-sushi 2px 2px 4px, $btnBoxShadow-sushi-2 -2px -2px 4px -1px;\n    transition: all 0.1s ease 0s;\n    outline: $walletBtnOutline;\n    margin-bottom: 15px;\n  }\n  .wallet-btn:hover,\n  .wallet-btn:focus,\n  .wallet-btn:active {\n    border-width: 1px;\n    border-style: solid;\n    border-color: $walletBtnColor;\n    border-image: initial;\n    border-radius: 40px;\n    outline: $walletBtnOutline;\n    color: $walletBtnBg;\n    background-color: $walletBtnColor;\n  }\n  .wallet-btn-name {\n    margin: 0 0 0 16px;\n    letter-spacing: 2px;\n    font-family: $fontTit;\n    text-transform: capitalize;\n    font-size: 18px;\n  }\n  .wallet-btn-icon {\n    height: 40px;\n    width: 40px;\n  }\n\n  .index-countdown {\n    margin-bottom: 30px;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/main"}]}